webpackJsonp([1],{"+d61":function(t,e){},"8K4p":function(t,e){},D7Lh:function(t,e){},EJUa:function(t,e){},HmVW:function(t,e){},KLf8:function(t,e){},"M+7C":function(t,e){},MhuR:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},i=a("VU/8")({name:"App"},o,!1,null,null,null).exports,n=a("/ocq"),l={name:"login",mounted(){},data:()=>({formData:{code:"",userName:""},getCodeTips:"获取验证码",tips:""}),methods:{getCode(){let t=this;t.$ajax.get("euser/user/sendCode?phone="+t.formData.userName,function(e){1===e.code&&t.getCodeTime()})},getCodeTime(){let t=61,e=this,a=setInterval(function(){t--,e.getCodeTips=t+"s后重发",0===t&&(clearInterval(a),e.getCodeTips="获取验证码")},1e3)},submit(){let t=this;return 0===t.formData.userName.length?(t.tips="请输入电话号码",!1):0===t.formData.code.length?(t.tips="请输入验证码",!1):(t.tips="",void t.$ajax.post("euser/user/user/smsLogin",t.formData).then(function(e){if(1===e.code){let a=localStorage.getItem("path");a&&-1===a.indexOf("login")?(localStorage.setItem("path",null),t.$router.push(a)):t.$router.push("project/projectList"),t.$ajax.defaults.headers.common.token=e.data.token,localStorage.setItem("user",JSON.stringify(e.data))}}))}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginSession"},[a("h1",{staticClass:"loginTitle"},[t._v("区世界管理工具")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.userName,expression:"formData.userName"}],staticClass:"phoneNumber",attrs:{type:"text",placeholder:"输入手机号"},domProps:{value:t.formData.userName},on:{input:function(e){e.target.composing||t.$set(t.formData,"userName",e.target.value)}}}),t._v(" "),a("p",{staticClass:"codeBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.code,expression:"formData.code"}],staticClass:"code",attrs:{type:"text",placeholder:"短信验证码"},domProps:{value:t.formData.code},on:{input:function(e){e.target.composing||t.$set(t.formData,"code",e.target.value)}}}),a("span",{staticClass:"getCode",on:{click:t.getCode}},[t._v(t._s(t.getCodeTips))])]),t._v(" "),a("div",{staticClass:"tipsBox"},[a("span",{staticClass:"tips"},[t._v(t._s(t.tips))])]),t._v(" "),a("div",{staticClass:"submit",on:{click:function(e){t.submit()}}},[t._v("进入区世界")]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"terms"},[this._v("点击进入区世界按钮即表示同意"),e("a",{staticClass:"termsLink",attrs:{href:"https://www.baidu.com"}},[this._v("《用户服务协议》")])])}]};var r=a("VU/8")(l,c,!1,function(t){a("8K4p")},null,null).exports,d={name:"createVote",created(){let t=localStorage.getItem("user");if(!t)return this.$router.push("/login"),!1;this.$ajax.defaults.headers.common.token=JSON.parse(t).token},data:()=>({active:1,showTable:!0}),methods:{changeActive(t){this.active=t}},watch:{$route(t,e){t.path.indexOf("/project/")>-1?this.active=1:t.path.indexOf("/work/")>-1?this.active=2:t.path.indexOf("/mine/")>-1&&(this.active=3),"workIndex"===t.name||"personal"===t.name||"projectList"===t.name?this.showTable=!0:this.showTable=!1,console.log(t)}},beforeRouteEnter(t,e,a){let s=1;t.path.indexOf("/project/")>-1?s=1:t.path.indexOf("/work/")>-1?s=2:t.path.indexOf("/mine/")>-1&&(s=3),a(t=>{t.active=s})}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"main"},[a("router-view")],1),t._v(" "),t.showTable?a("div",{staticClass:"table"},[a("router-link",{staticClass:"tableCell",class:1==t.active?"layout-active":"",attrs:{to:"/project/projectList"},nativeOn:{click:function(e){t.changeActive(1)}}},[t._v("项目\n        ")]),t._v(" "),a("router-link",{staticClass:"tableCell",class:2==t.active?"layout-active":"",attrs:{to:"/work/workIndex"},nativeOn:{click:function(e){t.changeActive(2)}}},[t._v("工作\n        ")]),t._v(" "),a("router-link",{staticClass:"tableCell",class:3==t.active?"layout-active":"",attrs:{to:"/mine/personal"},nativeOn:{click:function(e){t.changeActive(3)}}},[t._v("我的\n        ")])],1):t._e()])},staticRenderFns:[]};var u=a("VU/8")(d,v,!1,function(t){a("MhuR")},null,null).exports,h={name:"PublicHeader",props:["headerParams"],mounted(){this.voteId=this.$route.query.voteId},data:()=>({toolShow:!1,voteId:null,toolBox:!1}),watch:{headerParams:{handler(){0===Object.keys(this.headerParams.tool).length?this.toolBox=!1:this.toolBox=!0},deep:!0}},methods:{showTool(t){t.target.parentElement.className.indexOf("publicHeader-toolBox")>-1||t.target.className.indexOf("publicHeader-tool")>-1?this.toolShow=!this.toolShow:this.toolShow=!1},editVote(){let t=this;t.$ajax.delete("evote/vote/"+t.voteId).then(function(e){1===e.code&&t.$router.push({path:"/work/createVote",query:{voteId:t.voteId,edit:!0}})})},shutDownVote(){let t=this;t.$ajax.delete("evote/vote/end/"+t.voteId).then(function(e){1===e.code&&t.$router.push("/work/voteList")})},deleteVote(){let t=this;t.$ajax.delete("evote/vote/"+t.voteId).then(function(e){1===e.code&&t.$router.push("/work/voteList")})}}},p={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"publicHeaderBox"},[s("span",{staticClass:"backBtn",on:{click:function(){t.$router.go(-1)}}},[e._v(e._s(e.headerParams.title))]),e._v(" "),e.headerParams.search?s("div",{staticClass:"publicHeader-search"}):e._e(),e._v(" "),e.headerParams.create?s("router-link",{staticClass:"publicHeader-createVote",attrs:{to:"/work/createVote"}}):e._e(),e._v(" "),e.toolBox?s("div",{staticClass:"publicHeader-tool",on:{click:function(t){e.showTool(t)}}},[e.toolShow?s("div",{staticClass:"publicHeader-mask",on:{click:function(){t.toolShow=!1}}}):e._e(),e._v(" "),e.toolShow?s("p",{staticClass:"publicHeader-toolBox"},[e.headerParams.tool.edit?s("span",{staticClass:"publicHeader-edit",on:{click:e.editVote}},[e._v("编辑投票")]):e._e(),e._v(" "),e.headerParams.tool.shutDown?s("span",{staticClass:"publicHeader-shutDown",on:{click:e.shutDownVote}},[e._v("结束投票")]):e._e(),e._v(" "),e.headerParams.tool.delete?s("span",{staticClass:"publicHeader-delete",on:{click:e.deleteVote}},[e._v("删除投票")]):e._e()]):e._e()]):e._e()],1)},staticRenderFns:[]};var m=a("VU/8")(h,p,!1,function(t){a("mrYp")},null,null).exports,g={name:"createVote",beforeMount(){},mounted(){this.getData(this.state,this.voteList.currentPage)},data:()=>({header:{title:"我的投票",search:!0,create:!0},showVoteList:!0,showAddVote:!1,voteList:{selected:0,draftBtn:!1,loading:!1,onGoingData:{},listTitle:["投票列表","投票列表","草稿箱"],totalElements:"",draftData:[],draftBtnIndex:null,currentPage:1,state:1}}),methods:{getData(t,e,a){let s=this,o=e;a&&(o+=1,s.voteList.currentPage=o),s.$ajax.post("evote/vote/page?size=20&page="+o,{state:t}).then(function(t){1===t.code&&t.data.totalElements>0||2!==s.voteList.selected?(s.showVoteList=!0,s.showAddVote=!1,a?s.voteList.onGoingData.content=s.voteList.onGoingData.content.concat(t.data.content):s.voteList.onGoingData=t.data,s.voteList.loading=!1,s.voteList.totalElements=t.data.totalElements):(s.showAddVote=!0,s.showVoteList=!1)})},modelChange(t){let e=this;if(e.voteList.selected=t,2!==t)t++,e.voteList.currentPage=1,this.state=t,e.getData(t,e.voteList.currentPage);else{if(!localStorage.getItem("voteList"))return!1;let t=JSON.parse(localStorage.getItem("voteList"));e.voteList.draftData=t||[],e.voteList.totalElements=e.voteList.draftData.length}},loadMore(){if(this.voteList.currentPage==this.voteList.onGoingData.totalPages)return!1;this.voteList.loading=!0,this.getData(this.state,this.voteList.currentPage,1)},showDraftBtn(t,e){let a=this;e.target.className.indexOf("voteList-draftDel")>-1?a.voteList.draftBtnIndex=null:a.voteList.draftBtnIndex=t},delDraft(t){this.voteList.draftData.splice(t,1),localStorage.setItem("voteList",JSON.stringify(this.voteList.draftData)),this.voteList.totalElements=this.voteList.draftData.length},editDraft(t){console.log(t),this.$router.push({path:"/work/createVote",query:{voteIndex:t,draft:!0}})},toResults(t,e){t?this.$router.push({path:"/work/voteResults",query:{voteId:e}}):this.$router.push({path:"/work/vote",query:{voteId:e}})},emptyDraft(){localStorage.setItem("voteList",[]),self.voteList.draftData=[]}},components:{PublicHeader:m}},_={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"voteList-main"},[s("div",{staticClass:"voteList-top clear"},[s("PublicHeader",{attrs:{"header-params":e.header}}),e._v(" "),!0===e.showVoteList?s("div",{staticClass:"voteList-navBar"},[s("span",{staticClass:"voteList-barOnGoing",class:0===e.voteList.selected?"active":"",on:{click:function(t){e.modelChange(0)}}},[s("em",[e._v("进行中")])]),e._v(" "),s("span",{staticClass:"voteList-barCompleted",class:1===e.voteList.selected?"active":"",on:{click:function(t){e.modelChange(1)}}},[s("em",[e._v("已结束")])]),e._v(" "),s("span",{staticClass:"voteList-barDraft",class:2===e.voteList.selected?"active":"",on:{click:function(t){e.modelChange(2)}}},[s("em",[e._v("草稿箱")])])]):e._e()],1),e._v(" "),s("div",{staticClass:"voteList-content"},[!0===e.showAddVote?s("div",{staticClass:"voteList-create"},[s("span",{staticClass:"voteList-voteEmpty"},[e._v("还没有任何投票")]),e._v(" "),s("div",{staticClass:"voteList-createVote"},[s("router-link",{staticClass:"voteList-createVoteBtn",attrs:{to:"/work/createVote"}},[s("i",{staticClass:"voteList-createVoteBtnIcon"}),e._v("创建新投票\n                ")])],1)]):e._e(),e._v(" "),null!==e.voteList.draftBtnIndex?s("div",{staticClass:"voteList-contentMask",on:{click:function(){t.voteList.draftBtnIndex=null}}}):e._e(),e._v(" "),!0===e.showVoteList?s("div",{staticClass:"voteList-list"},[s("p",{staticClass:"voteList-listTitle"},[e._v("\n                "+e._s(e.voteList.listTitle[e.voteList.selected])+"（"+e._s(e.voteList.totalElements)+"）"),2===e.voteList.selected?s("span",{staticClass:"voteList-listDraftEmpty",on:{click:e.emptyDraft}},[e._v("一键清空")]):e._e()]),e._v(" "),0===e.voteList.selected?s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"voteList-scrollBox",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},e._l(e.voteList.onGoingData.content,function(t){return s("li",{staticClass:"voteList-scrollLi"},[s("div",{staticClass:"voteList-scrollIcon"}),e._v(" "),s("div",{staticClass:"voteList-scrollCenter"},[s("p",{staticClass:"voteList-scrollTitle"},[e._v(e._s(t.voteTitle))]),e._v(" "),s("p",{staticClass:"voteList-scrollInfo"},[e._v("发起人: "+e._s(t.createBy)+" 参与人数："+e._s(t.participants))]),e._v(" "),1==~~t.isVote?s("p",{staticClass:"voteList-scrollDone"},[e._v("已投票")]):e._e()]),e._v(" "),s("div",{staticClass:"voteList-scrollLink",on:{click:function(a){e.toResults(t.isVote,t.voteId)}}},[e._v(e._s(t.isVote?"查看结果":"去投票")+"\n                    ")])])})):e._e(),e._v(" "),1===e.voteList.selected?s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"voteList-scrollBox",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},e._l(e.voteList.onGoingData.content,function(t){return s("li",{staticClass:"voteList-scrollLi"},[s("div",{staticClass:"voteList-scrollIconOut"}),e._v(" "),s("div",{staticClass:"voteList-scrollCenter"},[s("p",{staticClass:"voteList-scrollTitle"},[e._v(e._s(t.voteTitle))]),e._v(" "),s("p",{staticClass:"voteList-scrollInfo"},[e._v("发起人: "+e._s(t.createBy)+" 参与人数："+e._s(t.participants))]),e._v(" "),!1===t.isVote?s("p",{staticClass:"voteList-scrollDo voteList-scrollDoBg"},[e._v("未投票")]):e._e(),e._v(" "),!0===t.isVote?s("p",{staticClass:"voteList-scrollDo"},[e._v("已投票")]):e._e()]),e._v(" "),s("div",{staticClass:"voteList-scrollLink",on:{click:function(a){e.toResults(1,t.voteId)}}},[e._v("查看结果")])])})):e._e(),e._v(" "),2===e.voteList.selected?s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"voteList-scrollBox",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"100"}},e._l(e.voteList.draftData,function(t,a){return s("li",{staticClass:"voteList-scrollLi"},[s("div",{staticClass:"voteList-scrollIcon voteList-scrollIconDraft"}),e._v(" "),s("div",{staticClass:"voteList-scrollCenter"},[s("p",{staticClass:"voteList-scrollTitle voteList-scrollTitleDraft"},[e._v(e._s(t.voteTitle))])]),e._v(" "),s("div",{staticClass:"voteList-draftBtnBox",class:e.voteList.draftBtnIndex===a?"active":"out",on:{click:function(t){e.showDraftBtn(a,t)}}},[s("div",{staticClass:"voteList-draftBtnMain"},[s("div",{staticClass:"voteList-draftBtn"},[s("span",{staticClass:"voteList-draftDel",on:{click:function(t){e.delDraft(a)}}},[e._v("删除")]),e._v(" "),s("span",{staticClass:"voteList-draftEdit",on:{click:function(t){e.editDraft(a)}}},[e._v("编辑")])])])])])})):e._e(),e._v(" "),e.voteList.loading?s("div",{staticClass:"voteList-loadMore"},[s("mt-spinner",{attrs:{type:3}}),e._v(" "),s("span",[e._v("加载更多")])],1):e._e()]):e._e()])])},staticRenderFns:[]};var f=a("VU/8")(g,_,!1,function(t){a("UWDS")},null,null).exports,C=a("Au9i"),D=a.n(C),x={name:"createVote",mounted(){let t=this.$route.query;console.log(t),t&&t.draft?(this.draftId=t.voteIndex,this.vote=JSON.parse(localStorage.getItem("voteList"))[t.voteIndex]):t&&t.edit&&(this.editData=t,this.getEditData())},data(){return{selected:"1",header:{title:"创建投票"},draftId:null,editData:null,vote:{endTime:this.calculationDate(1),endTimeType:"1",id:0,optionDTOList:[{content:"",id:0},{content:"",id:1}],optionType:"1",voteDesc:"",voteTitle:""}}},methods:{getEditData(){let t=this;t.$ajax.get("evote/vote/detail/"+t.editData.voteId).then(function(e){1===e.code&&(t.vote=e.data)})},removeOption(t){this.vote.optionDTOList.splice(t,1)},addOption(){this.vote.optionDTOList.length;this.vote.optionDTOList.push({content:""})},preview(){if(!this.validForm())return console.log(1),!1;this.vote.preview=!0;let t=JSON.stringify(this.vote);localStorage.setItem("preview",t),this.$router.push({path:"/work/vote",query:{params:t}})},saveDraft(){let t=this;if(!t.validForm())return!1;if(localStorage.getItem("voteList")){let e=JSON.parse(localStorage.getItem("voteList"));if(e&&e.length>19)return Object(C.Toast)("草稿箱最多保存20条"),!1;e.push(t.vote),localStorage.setItem("voteList",JSON.stringify(e))}else localStorage.setItem("voteList",JSON.stringify([t.vote]))},releaseVote(){let t=this;if(!t.validForm())return!1;let e={};e=t.editData?{method:"put",url:"evote/vote/update"}:{method:"post",url:"evote/vote/add"},t.$ajax[e.method](e.url,t.vote).then(function(e){if(1===e.code&&(t.$router.push("/work/voteList"),t.draftId)){let e=JSON.parse(localStorage.getItem("voteList"));e.splice(t.draftId,1),localStorage.setItem("voteList",JSON.stringify(e))}})},changeIndex(t){0===t?this.vote.optionDTOList.splice(0,1,...this.vote.optionDTOList.splice(1,1,this.vote.optionDTOList[0])):this.vote.optionDTOList.splice(t-1,1,...this.vote.optionDTOList.splice(t,1,this.vote.optionDTOList[t-1]))},openDateTimer(t){3==~~t?this.$refs.picker.open():1==~~t?this.vote.endTime=this.calculationDate(1):2==~~t&&(this.vote.endTime=this.calculationDate(7)),console.log(this.vote.endTime)},calculationDate(t){var e=new Date(Date.parse(new Date)+24*t*3600*1e3),a=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),i=e.getHours(),n=e.getMinutes();e.getSeconds();return a+"-"+s+"-"+o+"  "+i+":"+n+":00"},dateFilter(t){this.vote.endTime=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"   00:00:00"},validForm(){let t=this.vote;return 0===t.voteTitle.length?(Object(C.Toast)("请填写投票标题"),!1):0===t.optionDTOList.length?(Object(C.Toast)("请添加选项"),!1):!t.endTime||0!==t.endTime.length||3!=~~t.endTimeType||(Object(C.Toast)("请选择截止时间"),!1)}},beforeRouteEnter(t,e,a){a(t=>{"vote"===e.name&&(t.vote=JSON.parse(localStorage.getItem("preview")))})},components:{PublicHeader:m}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createVote-main small-bg"},[a("div",{staticClass:"createVote-top"},[a("PublicHeader",{attrs:{"header-params":t.header}}),t._v(" "),a("mt-navbar",{staticClass:"createVote-navBar",model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"1"}},[t._v("选项一")]),t._v(" "),a("mt-tab-item",{attrs:{id:"2"}},[t._v("选项二")])],1)],1),t._v(" "),a("div",{staticClass:"createVote-content"},[a("mt-tab-container",{staticClass:"createVote-containerItem",model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"1"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.vote.voteTitle,expression:"vote.voteTitle"}],staticClass:"createVote-title inputStyle",attrs:{type:"text",placeholder:"投票标题（必填）"},domProps:{value:t.vote.voteTitle},on:{input:function(e){e.target.composing||t.$set(t.vote,"voteTitle",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vote.voteDesc,expression:"vote.voteDesc"}],staticClass:"createVote-desc inputStyle",attrs:{type:"text",placeholder:"补充描述（选填）"},domProps:{value:t.vote.voteDesc},on:{input:function(e){e.target.composing||t.$set(t.vote,"voteDesc",e.target.value)}}}),t._v(" "),t._l(t.vote.optionDTOList,function(e,s){return a("p",{staticClass:"createVote-optionBox"},[a("span",{class:0===s?"createVote-optionDown":"createVote-optionUp",on:{click:function(e){t.changeIndex(s)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"item.content"}],staticClass:"createVote-optionDesc inputStyle",attrs:{type:"text",placeholder:"选项"},domProps:{value:e.content},on:{input:function(a){a.target.composing||t.$set(e,"content",a.target.value)}}}),t._v(" "),a("span",{staticClass:"createVote-optionDel",on:{click:function(e){t.removeOption(s)}}})])}),t._v(" "),a("div",{staticClass:"createVote-addOption"},[a("span",{on:{click:t.addOption}},[a("span",{staticClass:"createVote-addOptionIcon"}),t._v("\n                    添加选项\n                    ")])]),t._v(" "),a("div",{staticClass:"createVote-radio"},[a("span",{staticClass:"createVote-radioTitle"},[t._v("投票选项")]),t._v(" "),a("mt-radio",{staticClass:"createVote-radioList",attrs:{options:[{label:"多选",value:"1"},{label:"单选",value:"2"}]},model:{value:t.vote.optionType,callback:function(e){t.$set(t.vote,"optionType",e)},expression:"vote.optionType"}})],1),t._v(" "),a("div",{staticClass:"createVote-deadLine"},[a("span",{staticClass:"createVote-radioTitle"},[t._v("截止日期")]),t._v(" "),a("mt-radio",{staticClass:"createVote-deadLineList",attrs:{options:[{label:"一天后",value:"1"},{label:"一周后",value:"2"},{label:"不截止",value:"4"},{label:"自定义",value:"3"}]},on:{change:t.openDateTimer},model:{value:t.vote.endTimeType,callback:function(e){t.$set(t.vote,"endTimeType",e)},expression:"vote.endTimeType"}})],1),t._v(" "),a("div",{staticClass:"createVote-saveBtn"},[a("mt-button",{staticClass:"createVote-draft",attrs:{type:"default"},on:{click:t.saveDraft}},[t._v("保存至草稿箱")]),t._v(" "),a("mt-button",{staticClass:"createVote-preview",attrs:{type:"default"},on:{click:t.preview}},[t._v("预览")]),t._v(" "),a("mt-button",{staticClass:"createVote-release",attrs:{type:"default"},on:{click:t.releaseVote}},[t._v("发布")])],1)],2),t._v(" "),a("mt-tab-container-item",{attrs:{id:"2"}},t._l(4,function(t){return a("mt-cell",{key:t,attrs:{title:"测试 "+t}})}))],1),t._v(" "),a("mt-datetime-picker",{ref:"picker",attrs:{type:"date"},on:{confirm:t.dateFilter}})],1)])},staticRenderFns:[]};var w=a("VU/8")(x,b,!1,function(t){a("+d61")},null,null).exports,k={name:"vote",mounted(){let t=this.$route.query.params;t?(this.isPreview=!0,this.vote=JSON.parse(t)):(this.voteId=this.$route.query.voteId,this.getVoteData())},data:()=>({header:{title:"投票",tool:{}},isPreview:!1,select:{check:[],radio:""},voteId:null,vote:{}}),filters:{options(t){for(let e in t)t[e].label=t[e].content,t[e].value=new String(t[e].optionId);return console.log(t),t}},methods:{submit(){let t=this,e=[];2==~~t.vote.optionType?e.push(t.select.radio):e=t.select.check,t.$ajax.post("evote/vote",{optionIds:e,voteId:t.vote.voteId}).then(function(e){1===e.code&&t.$router.push("/work/voteList")})},getVoteData(){let t=this;t.$ajax.get("evote/vote/detail/"+t.voteId).then(function(e){1===e.code&&(t.vote=e.data,e.data.isCreateBy&&(t.$set(t.header.tool,"delete",!0),2!==e.data.state&&0===e.data.participants&&t.$set(t.header.tool,"edit",!0),2!==e.data.state&&t.$set(t.header.tool,"shutDown",!0)))})}},components:{PublicHeader:m}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vote-main"},[a("div",{staticClass:"vote-bg"}),t._v(" "),a("div",{staticClass:"vote-content",staticStyle:{"z-index":"1",position:"relative"}},[a("div",{staticClass:"vote-header",class:{active:t.isPreview}},[a("PublicHeader",{staticStyle:{"z-index":"2",position:"relative"},attrs:{"header-params":t.header}}),t._v(" "),t.isPreview?a("div",{staticClass:"vote-tips"},[a("span",{staticClass:"vote-tipsIcon"}),t._v("预览模式下不能投票")]):t._e(),t._v(" "),a("div",{staticClass:"vote-title"},[t._v("[标题] "+t._s(t.vote.voteTitle))]),t._v(" "),t.vote.voteDesc?a("div",{staticClass:"vote-desc"},[t._v(t._s(t.vote.voteDesc))]):t._e(),t._v(" "),a("div",{staticClass:"vote-endTime"},[t._v("截止日期: "+t._s(t.vote.endTime))])],1),t._v(" "),a("div",{staticClass:"vote-box"},[a("div",{staticClass:"vote-type"},[t._v("投票选项（多选）")]),t._v(" "),2==~~t.vote.optionType?a("mt-radio",{staticClass:"vote-radioList",attrs:{options:t._f("options")(t.vote.optionDTOList)},model:{value:t.select.radio,callback:function(e){t.$set(t.select,"radio",e)},expression:"select.radio"}}):t._e(),t._v(" "),1==~~t.vote.optionType?a("mt-checklist",{staticClass:"vote-checkBoxList",attrs:{options:t._f("options")(t.vote.optionDTOList)},model:{value:t.select.check,callback:function(e){t.$set(t.select,"check",e)},expression:"select.check"}}):t._e(),t._v(" "),a("div",{staticClass:"vote-submit",on:{click:function(e){!t.isPreview&&t.submit()}}},[t._v("投票")])],1)]),t._v(" "),t.isPreview?a("div",{staticClass:"vote-releaseBtn"},[t._v("发布")]):t._e()])},staticRenderFns:[]};var L=a("VU/8")(k,y,!1,function(t){a("HmVW")},null,null).exports,T={name:"voteResults",mounted(){this.voteId=this.$route.query.voteId,this.copyData=window.location.href,console.log(window.location.href),this.getData()},data:()=>({header:{title:"查看结果",tool:{}},copyData:"",voteId:"",state:["进行中","已结束","编辑中"],info:{}}),methods:{getData(){let t=this;t.$ajax.post("evote/vote/result/"+t.voteId).then(function(e){1===e.code&&(t.info=e.data,e.data.isCreateBy=!0,e.data.isCreateBy&&(t.$set(t.header.tool,"delete",!0),2!==e.data.state&&0===e.data.participants&&t.$set(t.header.tool,"edit",!0),2!==e.data.state&&t.$set(t.header.tool,"shutDown",!0)),console.log(t.header.tool),t.$set(t.header.tool,"edit",!0),console.log(t.header.tool))})},copyCode(){Object(C.Toast)("复制成功")}},components:{PublicHeader:m}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"voteResults-main small-bg"},[a("div",{staticClass:"voteResults-header"},[a("PublicHeader",{attrs:{"header-params":t.header}})],1),t._v(" "),a("div",{staticClass:"voteResults-content"},[a("div",{staticClass:"voteResults-info clear"},[a("div",{staticClass:"voteResults-topIcon",class:{active:t.info.isVote}}),t._v(" "),a("div",{staticClass:"voteResults-staticIn",class:{active:t.info.isVote}},[t._v(t._s(t.info.isVote?"投票成功":"未投票"))]),t._v(" "),a("div",{staticClass:"voteResults-title"},[t._v("[标题] "+t._s(t.info.voteTitle))]),t._v(" "),a("div",{staticClass:"voteResults-desc"},[t._v(t._s(t.info.voteDesc))]),t._v(" "),a("div",{staticClass:"voteResults-endTime"},[t._v("截止日期："+t._s(t.info.endTime))]),t._v(" "),a("div",{staticClass:"voteResults-done"},[t._v("投票状态："),a("span",{staticClass:"voteResults-voteState",class:{active:1==t.info.state}},[t._v(t._s(t.state[t.info.state-1]))])]),t._v(" "),a("div",{staticClass:"voteResults-link"},[a("span",[t._v("投票链接：")]),t._v(" "),a("span",{staticClass:"voteResults-linkInfo"},[t._v(t._s(t.copyData))]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.copyData,expression:"copyData",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copyCode,expression:"copyCode",arg:"success"}],staticClass:"voteResults-copy"},[t._v("复制")])])]),t._v(" "),a("div",{staticClass:"voteResults-options"},[a("div",{staticClass:"voteResults-optionsTitle"},[t._v("投票统计")]),t._v(" "),a("div",{staticClass:"voteResults-optionsRadio"},[t._v("投票选项： "),a("span",{staticClass:"voteResults-optionsFontColor"},[t._v(t._s(1===t.info.optionType?"多选":"单选"))])]),t._v(" "),a("div",{staticClass:"voteResults-optionsJoiner"},[t._v("参与人数： "),a("span",{staticClass:"voteResults-optionsFontColor"},[t._v(t._s(t.info.participants))])]),t._v(" "),t._l(t.info.optionDTOList,function(e){return a("div",[a("p",{staticClass:"voteResults-optionsDesc"},[t._v(t._s(e.content)+"  "+t._s(e.amount)),a("span",{staticClass:"voteResults-percentage"},[t._v(t._s(100*e.percentage)+"%")])]),t._v(" "),a("mt-progress",{attrs:{value:20,"bar-height":10}})],1)})],2)])])},staticRenderFns:[]};var R=a("VU/8")(T,I,!1,function(t){a("SpfU")},null,null).exports,$={name:"myMarket",mounted(){this.getData()},data:()=>({header:{title:"投资"},marketData:[],exchangeData:[],code:!1}),methods:{getData(){let t=this;t.$ajax.get("emarket/market/exchange/list?pageNo=1&pageSize=50").then(function(e){if(1===e.code){let a=e.data.result;t.marketData=a,t.exchangeData=a.slice(1,a.length);for(let e in t.exchangeData)t.exchangeData[e].method=t.linkTo}})},exchange(){this.code=!0},linkTo(t){this.$router.push({path:"/work/coinExchange",query:t})}},components:{PublicHeader:m}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myMarket-main big-bg"},[a("div",{staticClass:"myMarket-top"},[a("PublicHeader",{attrs:{"header-params":t.header}}),t._v(" "),a("div",{staticClass:"myMarket-topBg"})],1),t._v(" "),a("div",{staticClass:"myMarket-bottom"},[a("div",{staticClass:"myMarket-bottomMain"},t._l(t.marketData,function(e,s){return a("div",{staticClass:"myMarket-coinBox"},[a("div",{staticClass:"myMarket-coinInfo"},[a("p",{staticClass:"myMarket-coinIcon"}),t._v(" "),a("p",{staticClass:"myMarket-coinName"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"myMarket-coinRate"},[t._v("1"+t._s(e.item)+"=$"+t._s(e.usdValue))])]),t._v(" "),"BCR"==e.name?a("p",{staticClass:"myMarket-exchangeBtn",on:{click:t.exchange}},[a("i",{staticClass:"myMarket-rechargeIcon"}),t._v("兑换")]):t._e(),t._v(" "),"BCR"!=e.name?a("router-link",{staticClass:"myMarket-exchangeBtn",attrs:{to:{path:"/work/coinRecharge",query:{code:e.code}}}},[a("i",{staticClass:"myMarket-buyIcon"}),t._v("充币")]):t._e()],1)})),t._v(" "),a("mt-actionsheet",{attrs:{actions:t.exchangeData},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)])},staticRenderFns:[]};var S=a("VU/8")($,V,!1,function(t){a("KLf8")},null,null).exports,B={name:"coinExchange",mounted(){this.exchangeData=this.$route.query,this.getData()},data:()=>({header:{title:"兑换BCR"},exchangeStatic:{showTips:!1,success:!0},rangeValue:0,exchangeData:{},assetData:{},buyBCRNum:0}),watch:{rangeValue:{handler(){this.buyBCRNum=this.assetData.exchangeRate*this.rangeValue},deep:!0}},methods:{getData(){let t=this;t.$ajax.get("easset/exchange/transaction?assetCode="+t.exchangeData.code).then(function(e){1===e.code&&(t.assetData=e.data)})},exchange(){let t=this;t.$ajax.post("easset/exchange/transaction/submit?assetCode="+t.exchangeData.code+"&exchangeAmount="+t.rangeValue).then(function(e){1===e.code?t.getData():t.exchangeStatic.success=!1,t.exchangeStatic.showTips=!0})}},components:{PublicHeader:m}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coinExchange-main big-bg"},[a("div",{staticClass:"coinExchange-top"},[a("PublicHeader",{attrs:{"header-params":t.header}})],1),t._v(" "),a("div",{staticClass:"coinExchange-bottom"},[a("div",{staticClass:"coinExchange-coinIcon"}),t._v(" "),a("p",{staticClass:"coinExchange-assetsOne"},[t._v("\n            "+t._s(t.assetData.assetAmount)+" "+t._s(t.exchangeData.name)+"\n        ")]),t._v(" "),a("p",{staticClass:"coinExchange-assetsTwo"},[t._v("=$"+t._s(t.assetData.assetUsdValue))]),t._v(" "),a("div",{staticClass:"coinExchange-coin"},[a("i",{staticClass:"coinExchange-rechargeIcon"}),t._v("1 "+t._s(t.exchangeData.name)+" = "+t._s(t.assetData.exchangeRate)+" BCR\n        ")]),t._v(" "),a("div",{staticClass:"coinExchange-sellTitle"},[t._v("卖出 "+t._s(t.exchangeData.name))]),t._v(" "),a("div",{staticClass:"coinExchange-sellPrice"},[t._v(t._s(t.rangeValue))]),t._v(" "),a("mt-range",{staticClass:"coinExchange-range",attrs:{min:0,max:t.assetData.assetAmount,step:1,"bar-height":5},model:{value:t.rangeValue,callback:function(e){t.rangeValue=e},expression:"rangeValue"}},[a("div",{staticClass:"coinExchange-rangeNum",attrs:{slot:"start"},slot:"start"},[t._v("0")]),t._v(" "),a("div",{staticClass:"coinExchange-rangeNum",attrs:{slot:"end"},slot:"end"},[t._v(t._s(t.assetData.assetAmount))])]),t._v(" "),a("div",{staticClass:"coinExchange-buyPrice"},[t._v("\n            买入 BCR\n            "),a("span",{staticClass:"coinExchange-buyNum"},[t._v(t._s(t.buyBCRNum))])]),t._v(" "),a("div",{staticClass:"coinExchange-btn",on:{click:t.exchange}},[t._v("兑换")]),t._v(" "),a("mt-popup",{attrs:{position:"center"},model:{value:t.exchangeStatic.showTips,callback:function(e){t.$set(t.exchangeStatic,"showTips",e)},expression:"exchangeStatic.showTips"}},[a("div",{staticClass:"coinExchange-static",class:{"coinExchange-staticError":t.exchangeStatic.success}},[t._v("\n                    "+t._s(!0===t.exchangeStatic.success?"兑换成功":"兑换失败")+"\n                ")])])],1)])},staticRenderFns:[]};var N=a("VU/8")(B,E,!1,function(t){a("tnpT")},null,null).exports,O=a("X2mQ"),P={name:"coinRecharge",mounted(){this.assetCode=this.$route.query.code,this.getData()},data:()=>({header:{title:"充值BCR"},assetCode:"",marketData:{assetDepositAddress:""},qrcode:{colorLight:"#DAE2ED",colorDark:"#9AADBF"}}),methods:{getData(){let t=this;t.$ajax.get("easset/address/deposit?assetCode="+t.assetCode).then(function(e){1===e.code&&(t.marketData=e.data)})},copyCode(){Object(C.Toast)("复制成功")}},components:{PublicHeader:m,VueQr:O.a}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coinRecharge-main big-bg"},[a("div",{staticClass:"coinRecharge-top"},[a("PublicHeader",{attrs:{"header-params":t.header}})],1),t._v(" "),a("div",{staticClass:"coinRecharge-bottom"},[a("div",{staticClass:"coinRecharge-coinIcon"}),t._v(" "),a("p",{staticClass:"coinRecharge-assetsOne"},[t._v("\n            "+t._s(t.marketData.assetName)+"\n        ")]),t._v(" "),a("p",{staticClass:"coinRecharge-Bit"},[t._v("比特网络")]),t._v(" "),a("vue-qr",{staticClass:"coinRecharge-QRCode",attrs:{margin:10,colorLight:t.qrcode.colorLight,colorDark:t.qrcode.colorDark,text:t.marketData.assetDepositAddress}}),t._v(" "),a("p",{staticClass:"coinRecharge-address"},[t._v("充币地址")]),t._v(" "),a("p",{staticClass:"coinRecharge-addressInfo"},[t._v(t._s(t.marketData.assetDepositAddress))]),t._v(" "),a("p",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.marketData.assetDepositAddress,expression:"marketData.assetDepositAddress",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copyCode,expression:"copyCode",arg:"success"}],staticClass:"coinRecharge-copy"},[t._v("复制")])],1)])},staticRenderFns:[]};var M=a("VU/8")(P,j,!1,function(t){a("EJUa")},null,null).exports,A={name:"project",mounted(){},data:()=>({}),methods:{},components:{}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"work-main"},[e("router-link",{attrs:{to:"/work/myMarket"}},[this._v("行情")]),this._v(" "),e("router-link",{attrs:{to:"/work/voteList"}},[this._v("投票")])],1)},staticRenderFns:[]};var U=a("VU/8")(A,F,!1,function(t){a("y0Y/")},null,null).exports,H={name:"projectList",mounted(){},data:()=>({}),methods:{}},q={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("项目")])},staticRenderFns:[]};var J=a("VU/8")(H,q,!1,function(t){a("imAJ")},null,null).exports,Y={name:"personal",mounted(){},data:()=>({}),methods:{}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personal-main"},[a("div",{staticClass:"personal-info clear"},[a("img",{staticClass:"personal-head",attrs:{src:"http://img1.imgtn.bdimg.com/it/u=3384778320,3674632337&fm=26&gp=0.jpg",alt:""}}),t._v(" "),a("h6",{staticClass:"personal-name"},[t._v("昵称：EPOD")]),t._v(" "),a("span",{staticClass:"personal-number"},[t._v("1856465487")]),t._v(" "),a("router-link",{staticClass:"personal-edit",attrs:{to:"/mine/basic"}},[t._v("编辑")])],1),t._v(" "),a("p",{staticClass:"personal-money"},[a("img",{staticClass:"personal-moneyHead",attrs:{src:"http://img1.imgtn.bdimg.com/it/u=3384778320,3674632337&fm=26&gp=0.jpg",alt:""}}),t._v("我的资产\n        "),a("router-link",{staticClass:"personal-moneyBtn",attrs:{to:"/mine/assets"}},[t._v(">>")])],1),t._v(" "),a("h6",{staticClass:"personal-version"},[t._v("版本号：V0.01")])])},staticRenderFns:[]};var W=a("VU/8")(Y,G,!1,function(t){a("zKI5")},null,null).exports,z=a("sbrb"),K=a.n(z),X={name:"basic",mounted(){let t=JSON.parse(localStorage.getItem("user"));this.userInfo=t},data:()=>({userInfo:{},active:!1}),methods:{upload(t){let e=t.target.files||t.dataTransfer.files;e.length&&(this.picValue=e[0],this.imgPreview(this.picValue))},imgPreview(t){let e,a=this;if(K.a.getData(t,function(){e=K.a.getTag(this,"Orientation")}),t&&window.FileReader&&/^image/.test(t.type)){let s=new FileReader;s.readAsDataURL(t),s.onloadend=function(){let t=this.result,s=new Image;s.src=t,this.result.length<=102400?(a.headerImage=this.result,a.postImg()):s.onload=function(){let t=a.compress(s,e);a.headerImage=t,a.postImg()}}}},postImg(){let t=this;t.$ajax({method:"post",url:"euser/user/photo/upload",processData:!1,data:t.headerImage}).then(function(e){1===e.code?(t.userInfo.headIcon=e.data.headIcon,localStorage.setItem("user",JSON.stringify(t.userInfo))):alert("请稍后再试")})},rotateImg(t,e,a){if(null==t)return;let s=t.height,o=t.width,i=2;null==i&&(i=0),"right"==e?++i>3&&(i=0):--i<0&&(i=3);let n=90*i*Math.PI/180,l=a.getContext("2d");switch(i){case 0:a.width=o,a.height=s,l.drawImage(t,0,0);break;case 1:a.width=s,a.height=o,l.rotate(n),l.drawImage(t,0,-s);break;case 2:a.width=o,a.height=s,l.rotate(n),l.drawImage(t,-o,-s);break;case 3:a.width=s,a.height=o,l.rotate(n),l.drawImage(t,-o,0)}},compress(t,e){let a,s,o=document.createElement("canvas"),i=o.getContext("2d"),n=document.createElement("canvas"),l=n.getContext("2d"),c=t.src.length,r=t.width,d=t.height;if((a=r*d/4e6)>1?(console.log("大于400万像素"),r/=a=Math.sqrt(a),d/=a):a=1,o.width=r,o.height=d,i.fillStyle="#fff",i.fillRect(0,0,o.width,o.height),(s=r*d/1e6)>1){console.log("超过100W像素");let e=~~(r/(s=~~(Math.sqrt(s)+1))),o=~~(d/s);n.width=e,n.height=o;for(let c=0;c<s;c++)for(let r=0;r<s;r++)l.drawImage(t,c*e*a,r*o*a,e*a,o*a,0,0,e,o),i.drawImage(n,c*e,r*o,e,o)}else i.drawImage(t,0,0,r,d);if(""!=e&&1!=e)switch(e){case 6:this.rotateImg(t,"left",o);break;case 8:this.rotateImg(t,"right",o);break;case 3:this.rotateImg(t,"right",o),this.rotateImg(t,"right",o)}let v=o.toDataURL("image/jpeg",.1);console.log("压缩前："+c),console.log("压缩后："+v.length),console.log("压缩率："+~~(100*(c-v.length)/c)+"%"),n.width=n.height=o.width=o.height=0;var u=new FormData;return u.append("file",this.convertBase64UrlToBlob(v),Date.now()+".jpg"),u},convertBase64UrlToBlob(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var a=t.split(",")[0].split(":")[1].split(";")[0],s=new Uint8Array(e.length),o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return new Blob([s],{type:a})},mask(t){let e=this;-1===t.target.parentElement.className.indexOf("basic-changeHead")&&-1===t.target.className.indexOf("basic-head")&&(e.active=!1)},readLocalFile(){var t=this;let e=event.target.files[0],a=new FormData;a.append("file",e),t.$ajax({method:"post",url:"euser/user/photo/upload",processData:!1,data:a}).then(function(e){1===e.code?(t.userInfo.headIcon=e.data.headIcon,localStorage.setItem("user",JSON.stringify(t.userInfo))):alert("请稍后再试")})}}},Q={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"basic-box",on:{click:e.mask}},[s("div",{staticClass:"basic-li"},[e._v("\n        个人信息\n    ")]),e._v(" "),s("div",{staticClass:"basic-li"},[e._v("\n        头像\n        "),s("img",{staticClass:"basic-head",attrs:{src:e.userInfo.headIcon,alt:""},on:{click:function(){t.active=!t.active}}})]),e._v(" "),s("div",{staticClass:"basic-li"},[e._v("\n        昵称\n        "),s("router-link",{staticClass:"basic-name",attrs:{to:"/mine/rename"}},[e._v(e._s(e.userInfo.nickName))])],1),e._v(" "),s("div",{staticClass:"basic-li"},[e._v("\n        手机号\n        "),s("span",{staticClass:"basic-phone"},[e._v(e._s(e.userInfo.userName))])]),e._v(" "),s("div",{staticClass:"basic-changeHead",class:!0===e.active?"basic-changeHead-enter":"basic-changeHead-leave"},[s("p",{staticClass:"basic-changePhoto"},[e._v("更换头像\n            "),s("input",{staticClass:"basic-changePhotoBtn",attrs:{type:"file",id:"uploadFile",accept:"image/*"},on:{change:function(t){e.upload(t)}}})]),e._v(" "),s("p",{staticClass:"basic-changeE"},[e._v("取消")])])])},staticRenderFns:[]};var Z=a("VU/8")(X,Q,!1,function(t){a("O3YR")},null,null).exports,tt={name:"rename",mounted(){let t=JSON.parse(localStorage.getItem("user"));this.userInfo=t},data:()=>({userInfo:{}}),methods:{submit(){let t=this;t.$ajax.put("euser/user/update?nickName="+t.userInfo.nickName).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),1===e.code?t.$router.go(-1):alert("请稍后再试")})},delName(){this.userInfo.nickName=""}}},et={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"rename-box"},[s("div",{staticClass:"rename-tool clear"},[s("span",{staticClass:"rename-esc",on:{click:function(){t.$router.go(-1)}}},[e._v("取消")]),e._v(" "),s("span",{staticClass:"rename-done",on:{click:e.submit}},[e._v("完成")])]),e._v(" "),s("div",{staticClass:"rename-inputTool"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.nickName,expression:"userInfo.nickName"}],staticClass:"rename-input",attrs:{type:"text"},domProps:{value:e.userInfo.nickName},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"nickName",t.target.value)}}}),e._v(" "),s("em",{staticClass:"rename-delete",on:{click:e.delName}},[e._v("X")])])])},staticRenderFns:[]};var at=a("VU/8")(tt,et,!1,function(t){a("OuNj")},null,null).exports,st={name:"assets",mounted(){let t=JSON.parse(localStorage.getItem("user"));this.userInfo=t,this.getAssets()},data:()=>({userInfo:{},assetsData:[]}),methods:{getAssets(){let t=this;t.$ajax.get("easset/asset/info").then(function(e){1===e.code&&(t.assetsData=e.data.assets)})}}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"assets-box"},[a("strong",{staticClass:"assets-all"},[t._v("总资产：$4500")]),t._v(" "),t._l(t.assetsData,function(e){return a("p",{staticClass:"assets-list"},[a("span",{staticClass:"assets-name"},[t._v(" "+t._s(e.name))]),t._v(" "),a("span",{staticClass:"assets-num"},[t._v(t._s(e.value)+"个")]),t._v(" "),a("span",{staticClass:"assets-money"},[t._v("$"+t._s(e.usdValue||0))]),t._v(" "),a("router-link",{staticClass:"assets-btn",attrs:{to:{path:"/mine/TransactionRecords",query:{code:e.code}}}},[t._v("> ")])],1)})],2)},staticRenderFns:[]};var it=a("VU/8")(st,ot,!1,function(t){a("U1TW")},null,null).exports,nt={name:"transactionRecords",mounted(){this.formData.assetCode=this.$route.query.code,this.getData(this.formData)},data:()=>({time:{postTime:"",showTime:"默认",timerTool:["默认","一周内","一月内","一年内"]},records:[{no:"BCR",type:1,changeDelta:.05,createTimestamp:"2018-10-11 12:00:00"}],formData:{assetCode:"",startTime:"",endTime:"",pageNo:1,pageSize:20}}),methods:{goToInfo(t){this.$router.push({path:"/mine/transactionDetail",query:t})},setTime(t,e){let a=this;switch(a.time.showTime=e,t){case 0:a.formData.startTime="",a.formData.endTime="";break;case 1:a.formData.startTime=a.dayAgo(7),a.formData.endTime=a.dayAgo(0);break;case 2:a.formData.startTime=a.monthAgo(),a.formData.endTime=a.dayAgo(0);break;case 3:a.formData.startTime=a.yearAgo(),a.formData.endTime=a.dayAgo(0)}this.getData(a.formData)},getData(t){let e=this;e.$ajax.post("easset/asset/transaction/list",t).then(function(t){1===t.code&&(e.records=t.data.result)})},dayAgo(t){var e=new Date,a=new Date(e-24*t*3600*1e3);return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},monthAgo(){let t=new Date;var e=new Array([0],[31],[28],[31],[30],[31],[30],[31],[31],[30],[31],[30],[31]),a=t.getFullYear(),s=t.getDate(),o=t.getMonth()+1;return a%4==0&&a%100!=0&&(e[2]=29),o-1==0?(a-=1,o=12):o-=1,s=e[o]>=s?s:e[o],o<10&&(o="0"+o),s<10&&(s="0"+s),a+"-"+o+"-"+s},yearAgo(){var t=new Date,e=t.getFullYear()-1,a=t.getDate(),s=t.getMonth()+1;return s<10&&(s="0"+s),a<10&&(a="0"+a),e+"-"+s+"-"+a}},components:{}},lt={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"transactionRecords-box"},[s("div",{staticClass:"transactionRecords-wrapper"},[s("header",{staticClass:"transactionRecords-header"},[s("span",{staticClass:"transactionRecords-back",on:{click:function(){t.$router.go(-1)}}},[e._v("<<")]),e._v("\n            BCR交易记录\n        ")]),e._v(" "),s("h6",{staticClass:"transactionRecords-title"},[e._v("查询时间")]),e._v(" "),s("div",{staticClass:"transactionRecords-timerBox"},[s("div",{staticClass:"transactionRecords-timer"},[e._l(e.time.timerTool,function(t,a){return s("span",{staticClass:"transactionRecords-timerBtn",on:{click:function(s){e.setTime(a,t)}}},[e._v(e._s(t))])}),e._v(" "),s("span",{staticClass:"transactionRecords-timerBtn"},[e._v("自定义")])],2),e._v(" "),s("p",{staticClass:"transactionRecords-timerBoard"},[e._v("\n                "+e._s(e.time.showTime)+"\n            ")])]),e._v(" "),s("div",e._l(e.records,function(t,a){return s("div",{staticClass:"transactionRecords-list",on:{click:function(a){e.goToInfo(t)}}},[s("p",{staticClass:";"},[e._v(e._s(1===t.type?"买入":"卖出",t.no)+" "),s("span",{staticClass:"transactionRecords-num"},[e._v(e._s(1===t.type?"+":"-")+"$"+e._s(t.changeDelta))])]),e._v(" "),s("span",{staticClass:"transactionRecords-time"},[e._v(e._s(t.createTimestamp))])])}))])])},staticRenderFns:[]};var ct=a("VU/8")(nt,lt,!1,function(t){a("D7Lh")},null,null).exports,rt={name:"transactionDetail",mounted(){this.transactionDetail=this.$route.query,console.log(this.transactionDetail)},data:()=>({transactionDetail:{}}),methods:{}},dt={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"transactionDetail-box"},[s("header",{staticClass:"transactionDetail-header"},[s("span",{staticClass:"transactionDetail-back",on:{click:function(){t.$router.go(-1)}}},[e._v("<<")]),e._v("\n        记录详情\n    ")]),e._v(" "),s("h4",{staticClass:"transactionDetail-title"},[e._v(e._s(1===e.transactionDetail.type?"买入":"卖出")+e._s(e.transactionDetail.assetName)),s("span",{staticClass:"transactionDetail-status"},[e._v(e._s(1===e.transactionDetail.type?"+":"-")+"0.05BCR")])]),e._v(" "),s("div",{staticClass:"transactionDetail-list"},[e._v("付款方：数据暂无")]),e._v(" "),s("div",{staticClass:"transactionDetail-list"},[e._v("收款方：数据暂无")]),e._v(" "),s("div",{staticClass:"transactionDetail-list"},[e._v("交易号：数据暂无")]),e._v(" "),s("div",{staticClass:"transactionDetail-list"},[e._v("交易时间："+e._s(e.transactionDetail.createTimestamp))])])},staticRenderFns:[]};var vt=a("VU/8")(rt,dt,!1,function(t){a("M+7C")},null,null).exports,ut=a("GQaK"),ht={props:{probeType:{type:Number,default:1},click:{type:Boolean,default:!0},scrollX:{type:Boolean,default:!1},listenScroll:{type:Boolean,default:!1},data:{type:Array,default:null},pullup:{type:Boolean,default:!1},pulldown:{type:Boolean,default:!1},beforeScroll:{type:Boolean,default:!1},refreshDelay:{type:Number,default:20},loadingStatus:{type:Object,default:function(){return{showIcon:!1,status:""}}},pulldownUI:{type:Boolean,default:!1},pullupUI:{type:Boolean,default:!1}},data:()=>({loadingConnecting:!1,pulldownTip:{text:"下拉刷新",rotate:""}}),mounted(){setTimeout(()=>{this._initScroll()},20)},methods:{_initScroll(){if(this.$refs.wrapper){if(this.scroll=new ut.a(this.$refs.wrapper,{probeType:this.probeType,click:this.click,scrollX:this.scrollX}),this.listenScroll||this.pulldown||this.pullup){let t=this;this.scroll.on("scroll",e=>{this.listenScroll&&t.$emit("scroll",e),this.pulldown&&(e.y>50?this.pulldownTip={text:"松开立即刷新",rotate:"icon-rotate"}:this.pulldownTip={text:"下拉刷新",rotate:""}),this.pullup})}this.pullup&&this.scroll.on("scrollEnd",()=>{this.scroll.y<=this.scroll.maxScrollY+50&&this.$emit("scrollToEnd")}),this.pulldown&&this.scroll.on("touchend",t=>{t.y>50&&(setTimeout(()=>{this.pulldownTip={text:"下拉刷新",rotate:""}},600),this.$emit("pulldown"))}),this.beforeScroll&&this.scroll.on("beforeScrollStart",()=>{this.$emit("beforeScroll")})}},disable(){this.scroll&&this.scroll.disable()},enable(){this.scroll&&this.scroll.enable()},refresh(){this.scroll&&this.scroll.refresh()},scrollTo(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},scrollToElement(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)}},watch:{data(){setTimeout(()=>{this.refresh()},this.refreshDelay)}}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"wrapper",staticClass:"better-scroll-root"},[a("div",{staticClass:"content-bg better-scroll-container"},[a("div",[t.pulldown?a("div",{staticClass:"pulldown-tip"},[a("i",{staticClass:"pull-icon indexicon icon-pull-down",class:[t.pulldownTip.rotate]}),t._v(" "),a("span",{staticClass:"tip-content"},[t._v(t._s(t.pulldownTip.text))])]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingStatus.showIcon||t.loadingStatus.status,expression:"loadingStatus.showIcon || loadingStatus.status"}],staticClass:"loading-pos"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadingStatus.showIcon,expression:"loadingStatus.showIcon"}],staticClass:"loading-container"},[t._m(0)]),t._v(" "),a("span",{staticClass:"loading-connecting"},[t._v(t._s(t.loadingStatus.status))])])]),t._v(" "),t._t("default")],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cube"},[e("div",{staticClass:"side side1"}),this._v(" "),e("div",{staticClass:"side side2"}),this._v(" "),e("div",{staticClass:"side side3"}),this._v(" "),e("div",{staticClass:"side side4"}),this._v(" "),e("div",{staticClass:"side side5"}),this._v(" "),e("div",{staticClass:"side side6"})])}]};var mt=a("VU/8")(ht,pt,!1,function(t){a("n0v7")},null,null).exports;s.default.use(n.a);var gt=new n.a({mode:"history",routes:[{path:"/project",component:u,children:[{name:"projectList",component:J,path:"projectList",tableShow:!0}]},{path:"/work",component:u,children:[{name:"workIndex",component:U,path:"workIndex",tableShow:!0},{name:"myMarket",component:S,path:"myMarket"},{name:"createVote",component:w,path:"createVote"},{name:"voteList",component:f,path:"voteList"},{name:"vote",component:L,path:"vote"},{name:"voteResults",component:R,path:"voteResults"},{name:"coinExchange",component:N,path:"coinExchange"},{name:"coinRecharge",component:M,path:"coinRecharge"}]},{path:"/mine",component:u,children:[{name:"personal",component:W,path:"personal",tableShow:!0},{name:"basic",component:Z,path:"basic"},{name:"rename",component:at,path:"rename"},{name:"assets",component:it,path:"assets"},{name:"transactionRecords",component:ct,path:"transactionRecords"},{name:"transactionDetail",component:vt,path:"transactionDetail"},{name:"test",component:mt,path:"test"}]},{path:"/login",name:"login",component:r}]}),_t={state:{action:1},mutations:{setAction(t,e){t.action=e}},actions:{increment(t){t.commit("setAction")}}},ft=a("mtWM"),Ct=a.n(ft),Dt=a("NYxO"),xt=(a("d8/S"),a("gqTo"),a("wvfG")),bt=a.n(xt);bt.a.config.autoSetContainer=!0,s.default.use(bt.a),s.default.use(Dt.a),s.default.use(D.a),s.default.config.productionTip=!1;var wt=Ct.a.create({baseURL:"http://test.bcrealm.com/api/",timeout:1e4});wt.interceptors.response.use(function(t){if(1001===t.data.code&&(localStorage.setItem("path",gt.currentRoute.fullPath),gt.push({path:"/login"})),200===t.status)return console.log(t.data),t.data},function(t){return Promise.reject(t)}),wt.defaults.headers.post["Content-Type"]="application/json; charset=utf-8",s.default.prototype.$ajax=wt,s.default.prototype.$axios=Ct.a,gt.beforeEach(function(t,e,a){t.name||gt.push({name:"login"}),a()}),new s.default({el:"#app",router:gt,store:_t,template:"<App/>",components:{App:i}})},O3YR:function(t,e){},OuNj:function(t,e){},SpfU:function(t,e){},U1TW:function(t,e){},UWDS:function(t,e){},"d8/S":function(t,e){},gqTo:function(t,e){},hxFq:function(t,e,a){"use strict";var s=a("qJhg"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return this.bindElement?e("div",[e("img",this._b({},"img",{id:this.uuid},!1))]):this._e()},staticRenderFns:[]},i=a("VU/8")(s.a,o,!1,null,null,null);e.a=i.exports},imAJ:function(t,e){},mrYp:function(t,e){},n0v7:function(t,e){},tnpT:function(t,e){},"y0Y/":function(t,e){},zKI5:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d0ec440bf87028c962c8.js.map